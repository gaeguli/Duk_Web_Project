<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>글 공유 사이트</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<h1>글 공유 사이트</h1>
<div id="loginSection">
    <p id="welcomeMessage"></p>
    <button onclick="logout()">로그아웃</button>
</div>

<div class="container">
    <input type="text" id="userId" placeholder="아이디를 입력하세요..." disabled />
    <textarea id="textInput" placeholder="여기에 글을 입력하세요..."></textarea><br>
    <button onclick="addPost()">글 공유하기</button>
    <h2>생성된 글 목록</h2>
    <div class="output" id="outputArea"></div>
</div>

<script src="index.js"></script>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const loggedInUser = localStorage.getItem("loggedInUser");
        const welcomeMessage = document.getElementById("welcomeMessage");

        if (!loggedInUser) {
            alert("로그인이 필요합니다.");
            window.location.href = "auth.html"; // 로그인 페이지로 이동
        } else {
            welcomeMessage.textContent = `${loggedInUser}님, 환영합니다!`;
            document.getElementById("userId").value = loggedInUser; // 아이디 필드에 로그인된 사용자 이름 표시
        }
    });

    function logout() {
        localStorage.removeItem("loggedInUser");
        window.location.href = "auth.html"; // 로그아웃 후 로그인 페이지로 이동
    }

    function addPost() {
        const loggedInUser = localStorage.getItem("loggedInUser");
        const textInput = document.getElementById("textInput").value;

        if (!loggedInUser) {
            alert("로그인이 필요합니다.");
            window.location.href = "auth.html"; // 로그인 페이지로 이동
            return;
        }

        if (textInput.trim() === "") {
            alert("글을 입력해주세요.");
            return;
        }

        const outputArea = document.getElementById("outputArea");
        const postDiv = document.createElement("div");
        postDiv.className = "post";

        postDiv.innerHTML = `
                <p class="author">${loggedInUser}</p>
                <div class="content">${textInput}</div>
            `;

        outputArea.appendChild(postDiv);
        document.getElementById("textInput").value = ""; // 입력란 초기화
    }
</script>
</body>
</html>
